---
const { currentLang, currentPath } = Astro.props;
const otherLang = currentLang === 'en' ? 'es' : 'en';

// Función para construir la URL del otro idioma
const buildOtherLangPath = () => {
  // Si no hay currentPath, usar las rutas por defecto del index
  if (!currentPath) {
    return currentLang === 'en' ? '/es' : '/en';
  }
  
  // Si currentPath ya incluye el idioma actual, reemplazarlo
  if (currentPath.startsWith(`/${currentLang}/`)) {
    return currentPath.replace(`/${currentLang}/`, `/${otherLang}/`);
  }
  
  // Si currentPath empieza con el idioma opuesto, cambiar al actual
  if (currentPath.startsWith(`/${otherLang}/`)) {
    return currentPath.replace(`/${otherLang}/`, `/${currentLang}/`);
  }
  
  // Si no hay idioma en la ruta, añadir el idioma de destino
  return `/${otherLang}${currentPath}`;
};

const otherLangPath = buildOtherLangPath();
---

<a 
  href={otherLangPath} 
  class="inline-flex items-center port-color font-instrument text-sm transition-all duration-300  hover:text-slate-200"
  title={`Switch to ${otherLang.toUpperCase()}`}
>
  <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 5h12M9 3v2m1.048 9.5A18.022 18.022 0 016.412 9m6.088 9h7M11 21l5-10 5 10M12.751 5C11.783 10.77 8.07 15.61 3 18.129"></path>
  </svg>
  <span class="font-medium">{otherLang.toUpperCase()}</span>
</a>